# yaml-language-server: $schema=https://raw.githubusercontent.com/reubenmiller/go-c8y-cli/v2/tools/schema/extensionCommands.json
---
$schema: https://raw.githubusercontent.com/reubenmiller/go-c8y-cli/v2/tools/schema/extensionCommands.json
group:
  name: devices
  description: Manage Devices
commands:
  - name: assignDevice
    description: Assigns a device to an asset.
    method: POST
    path: service/dtm/assets/{assetId}/devices/{deviceId}
    descriptionLong: >-
      Associates the specified device, identified by its ID, with an asset. The device must already exist. If one of the
      IDs does not exist, the operation responds with HTTP 404. If the managed object for the assetId is not an asset or
      of the managed object for the deviceId is not a Device, the operation responds with HTTP 422. Required user role:
      ROLE_DIGITAL_TWIN_ASSETS_ADMIN AND ROLE_INVENTORY_ADMIN
    pathParameters:
      - name: assetId
        type: string
        description: assetId identifier
        pipeline: true
        pipelineAliases:
          - id
          - assetId
          - asset.id
          - source.id
      - name: deviceId
        type: string
        description: deviceId identifier
        pipeline: true
        pipelineAliases:
          - id
          - deviceId
          - device.id
          - source.id
  - name: unassignDevice
    description: Removes a device from an asset.
    method: DELETE
    path: service/dtm/assets/{assetId}/devices/{deviceId}
    descriptionLong: >-
      Removes the association of the specified device, identified by its ID, with an asset. If one of the IDs does not
      exist, the operation responds with HTTP 404. If the managed object for the assetId is not an asset or of the
      managed object for the deviceId is not a Device, the operation responds with HTTP 422. Required user role:
      ROLE_DIGITAL_TWIN_ASSETS_ADMIN AND ROLE_INVENTORY_ADMIN
    pathParameters:
      - name: assetId
        type: string
        description: assetId identifier
        pipeline: true
        pipelineAliases:
          - id
          - assetId
          - asset.id
          - source.id
      - name: deviceId
        type: string
        description: deviceId identifier
        pipeline: true
        pipelineAliases:
          - id
          - deviceId
          - device.id
          - source.id
  - name: getChildDevices
    description: Retrieves child devices of an asset.
    method: GET
    path: service/dtm/assets/{assetId}/devices
    descriptionLong: Fetches all child devices of the parent asset specified by assetId.
    pathParameters:
      - name: assetId
        type: string
        description: assetId identifier
        pipeline: true
        pipelineAliases:
          - id
          - assetId
          - asset.id
          - source.id
    queryParameters:
      - name: query
        type: string
        description: Use the $filter keyword to specify filtering criteria.
        required: false
      - name: currentPage
        type: integer
        description: currentPage parameter
        required: false
      - name: pageSize
        type: integer
        description: pageSize parameter
        required: false
