# yaml-language-server: $schema=https://raw.githubusercontent.com/reubenmiller/go-c8y-cli/v2/tools/schema/extensionCommands.json
---
$schema: https://raw.githubusercontent.com/reubenmiller/go-c8y-cli/v2/tools/schema/extensionCommands.json
group:
  name: assets
  description: Manage Assets
commands:
  - name: detail
    description: Retrieves an existing asset.
    method: GET
    path: service/dtm/assets/{assetId}
    pathParameters:
      - name: assetId
        type: string
        description: assetId identifier
        pipeline: true
        pipelineAliases:
          - id
          - assetId
          - asset.id
          - source.id
    queryParameters:
      - name: withLinkedSeries
        type: boolean
        description: Indicates the resource to add the c8y_LinkedSeries fragment in the response.
        required: false
      - name: withSubAssets
        type: boolean
        description: Indicates the resource to add the sub-assets in the response.
        required: false
      - name: withLatestValues
        type: boolean
        description: Indicates the resource to fetch the latest values for this Asset and the name of the Source Devices.
        required: false
  - name: update
    description: Updates an existing asset.
    method: PUT
    path: service/dtm/assets/{assetId}
    descriptionLong: >-
      All properties of the asset can be updated, including name, type, c8y_ExternalId, and fragments - except the id.
      Missing properties in the request body will not be removed but stay unchanged. Fragments, however, will be
      replaced completely, so missing properties in a fragment will be removed. If you want to remove a fragment, you
      have to explicitly set it to null. If the c8y_ExternalId is different to the existing Asset, it will be updated
      accordingly. If the new c8y_ExternalId already exists, a conflict error will be returned. Required user role:
      ROLE_DIGITAL_TWIN_ASSETS_UPDATE AND ROLE_INVENTORY_ADMIN
    pathParameters:
      - name: assetId
        type: string
        description: assetId identifier
        pipeline: true
        pipelineAliases:
          - id
          - assetId
          - asset.id
          - source.id
    queryParameters:
      - name: fetchTypeFromSource
        type: boolean
        description: >-
          Indicates the resource to fetch the Measurement type associated with the linked device, derived from recorded
          Measurements.
        required: false
  - name: delete
    description: Deletes an existing asset.
    method: DELETE
    path: service/dtm/assets/{assetId}
    descriptionLong: 'Required user role: ROLE_DIGITAL_TWIN_ASSETS_ADMIN AND ROLE_INVENTORY_ADMIN'
    pathParameters:
      - name: assetId
        type: string
        description: assetId identifier
        pipeline: true
        pipelineAliases:
          - id
          - assetId
          - asset.id
          - source.id
  - name: list
    description: Retrieves all assets registered in your tenant.
    method: GET
    path: service/dtm/assets
    descriptionLong: The query parameter supports a flexible syntax for filtering and ordering results.
    queryParameters:
      - name: query
        type: string
        description: Use the $filter keyword to specify filtering criteria.
        required: false
      - name: withLinkedSeries
        type: boolean
        description: Indicates the resource to add the c8y_LinkedSeries fragment in the response.
        required: false
      - name: withSubAssets
        type: boolean
        description: Indicates the resource to add the sub-assets in the response.
        required: false
      - name: onlyRoots
        type: boolean
        description: onlyRoots query parameter
        required: false
      - name: currentPage
        type: integer
        description: currentPage query parameter
        required: false
      - name: pageSize
        type: integer
        description: pageSize query parameter
        required: false
  - name: create
    description: Creates an Asset, for example, a room within a building.
    method: POST
    path: service/dtm/assets
    descriptionLong: >
      In general, each asset may consist of:
      •   The name of the asset.
      •   The most specific type of the asset.
      •   Fragments with specific meanings, for example, c8y_Position, c8y_SupportedOperations.
      •   Fragment c8y_ExternalId which uniquely identifies the asset in an external system.

      If a value for the property id is provided, it will be ignored.If an asset with the given external ID exists
      and X-Upsert-Mode is true, the asset will be updated. If an asset with the given external ID exists and
      X-Upsert-Mode is false, a conflict error will be returned. If no asset with the given external ID exists, a new
      asset will be created (independent of the X-Upsert-Mode).
    queryParameters:
      - name: fetchTypeFromSource
        type: boolean
        description: >-
          Indicates the resource to fetch the Measurement type associated with the linked device, derived from recorded
          Measurements.
        required: false
    headerParameters:
      - name: upsertMode
        type: boolean
        description: Determines if an existing Asset should be updated or not.
        required: false
  - name: getByExternalId
    description: Retrieves an Asset by its external ID of type c8y_ExternalId.
    method: GET
    path: service/dtm/assets/externalIds/{externalId}
    descriptionLong: >-
      This endpoint allows clients to look up assets using identifiers from external systems. It resolves the external
      ID to a ManagedObject and returns the corresponding Asset if found.
    pathParameters:
      - name: externalId
        type: string
        description: externalId identifier
        pipeline: true
        pipelineAliases:
          - id
          - externalId
          - external.id
          - source.id
    queryParameters:
      - name: withLinkedSeries
        type: boolean
        description: Indicates the resource to add the c8y_LinkedSeries fragment in the response.
        required: false
      - name: withSubAssets
        type: boolean
        description: Indicates the resource to add the sub-assets in the response.
        required: false
  - name: count
    description: Counts all assets on your tenant.
    method: GET
    path: service/dtm/assets/count
    descriptionLong: You can optionally apply the filters query and onlyRoots.
    queryParameters:
      - name: query
        type: string
        description: Use the $filter keyword to specify filtering criteria.
        required: false
      - name: onlyRoots
        type: boolean
        description: onlyRoots query parameter
        required: false
